<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>Three.js</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../1.css">
<script type="text/javascript" src="../1.js"></script>
</head>
<body>

<h3>AudioAnalyser</h3>
Создает объект AudioAnalyser, использующий для анализа аудиоданных <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode" target="_blank">AnalyserNode</a><br>
Для его работы используется <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" target="_blank">Web Audio API</a>.
<a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Audio_API" target="_blank">Web Audio API</a> на русском языке.<br><br>
<h4>Пример</h4>
<pre>// Create an AudioListener and add it to the camera
// Создаем AudioListener и добавляем его к камере
var listener = new THREE.AudioListener();
camera.add( listener );<br>
// create an Audio source (создаем источник Audio)
var sound = new THREE.Audio( listener );<br>
// Load a sound and set it as the Audio object's buffer
// загружаем звук и устанавливаем его как буфер объекта Audio
var audioLoader = new THREE.AudioLoader();
audioLoader.load( 'sounds/ambient.ogg', function( buffer ) {
	sound.setBuffer( buffer );
	sound.setLoop(true);
	sound.setVolume(0.5);
	sound.play();
});<br>
// Create an AudioAnalyser, passing in the sound and desired fftSize
// создаем AudioAnalyser, с передачей sound и желаемого fftSize
var analyser = new THREE.AudioAnalyser( sound, 32 );<br>
// Get the average frequency of the sound (получаем среднюю частоту звука)
analyser.getAverageFrequency();</pre>
<h5>Другие примеры:</h5>
<pre><a href="https://threejs.org/examples/#webaudio_sandbox" target="_blank">webaudio / sandbox</a>
<a href="https://threejs.org/examples/#webaudio_visualizer" target="_blank">webaudio / visualizer</a></pre><br>

<h4>Конструктор</h4>
<pre>AudioAnalyser( audio, <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/fftSize" target="_blank">fftSize</a> )</pre>
Создает новый <a href="#" onmouseover="show('AudioAnalyser');" onmouseout="hide()">AudioAnalyser</a>.<br><br>

<h4>Свойства</h4>
<div class=blockindent><br>
<pre id="analyser"><a href="#" onclick="return false" onmouseover="show('AnalyserNode');" onmouseout="hide()">.analyser</a></pre>
Это <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode" target="_blank">AnalyserNode</a>, используемый для анализа звука.<br>
<div class=note_trans><b>Примечание переводчика:</b> вот краткий перевод описания AnalyserNode из вышеприведенной статьи <a class='link' onclick='javascript:spoiler(this)'>... читать далее</a>
<div style='display:none;'>Интерфейс AnalyserNode представляет узел, способный предоставить в реальном времени аналитические сведения о частотных и временны&#769;х параметрах звука. Это AudioNode, который передает неизменным аудиопоток со входа на выход, но при этом позволяет принимать сгенерированные данные, обрабатывать их и создавать визуализацию звука.<br>
AnalyserNode имеет всего лишь один вход и один выход и работает даже с неподключенным выходом.</div></div><br>

<pre id="fftSize"><span onclick="showClick(type_int)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('fft size - размер fft');" onmouseout="hide()">.fftSize</a></span></pre>
Ненулевое значение степени двойки до 2048, представляющее размер FFT (Fast Fourier Transform) быстрого преобразования Фурье, используемого для определения частотной области.<br>
Подробности смотрите на <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/fftSize" target="_blank">этой странице</a>.
<div class=note_trans><b>Примечание переводчика:</b> вот краткий перевод описания fftSize из вышеприведенной статьи <a class='link' onclick='javascript:spoiler(this)'>... читать далее</a>
<div style='display:none;'>Свойство <tt>fftSize</tt> интерфейса AnalyserNode это беззнаковое длинное (тип long - 4 байта) значение, представляющее размер окна сэмплов (выборок), которое используется при выполнении быстрого преобразования Фурье (Fast Fourier Transform - FFT) для получения частотных данных.<br>
Более высокое значение приведет к более подробной информации по частотам, но будет меньше деталей по времени (снизится число выборок за единицу времени).<br>
Должно быть степенью двойки между 2<sup>5</sup> и 2<sup>15</sup>, то есть одним значением из: 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, и 32768. Значением по умолчанию является 2048.
<div class=list>Если это значение не равно степени числа 2 или выходит за рамки указанного диапазона, выводится <span class="lnk"  onmouseover="show('DOM exception - исключение (т.е. особая ситуация) DOM (от англ.<br>Document Object Model — «объектная модель документа»).<br>То есть, это ненормальная ситуация, которая случается<br>в результате вызова метода или доступа к свойству web API.');" onmouseout="hide()">DOMException</span> с названием <span class="lnk"  onmouseover="show('index size error - ошибка размера индекса');" onmouseout="hide()">IndexSizeError</span>.</div></div><br>
Посмотрите также <a href="http://forum.reference-audio-analyzer.pro/viewtopic.php?t=109" target="_blank">этот материал</a> о спектрах звукового сигнала, быстром преобразовании Фурье, семплах, бинах и т.д.</div><br>

<pre id="data"><span onclick="showClick(type_uint8array)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('data - данные');" onmouseout="hide()">.data</a></span></pre>
Используемый для хранения данных анализа, массив 8-разрядных беззнаковых целых чисел, размер которого определяется свойством
<a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/frequencyBinCount" onmouseover="show('analyser.frequencyBinCount - количество<br>частотных бинов (bin - лоток, ячейка,<br>подборка) анализатора');" onmouseout="hide()" target="_blank">analyser.frequencyBinCount</a>.
<div class=note_trans><b>Примечание переводчика:</b> вот краткий перевод описания analyser.frequencyBinCount из вышеприведенной статьи <a class='link' onclick='javascript:spoiler(this)'>... читать далее</a>
<div style='display:none;'>Свойство frequencyBinCount (доступное только для чтения) интерфейса AnalyserNode обычно соответствует числу значений данных, с которыми приходится иметь дело для визуализации.<br>
<div class="caption"><img src="../img/spectrum.png" width=500><br>
Вот эти черные столбцы в спектре аудиосигнала и есть бины, а их число - frequencyBinCount.</div><br>
Значением свойства frequencyBinCount является беззнаковое целое число, равное числу значений, которые методы AnalyserNode.getByteFrequencyData() и AnalyserNode.getFloatFrequencyData() скопировали в предоставленный типизированный массив.<br>
По техническим причинам, связанным с определением быстрого преобразования Фурье, значение свойства analyserNode.frequencyBinCount всегда равно половине значения свойства AnalyserNode.fftSize.
Поэтому оно будет равно одному из следующих значений: 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, и 16384.</div></div></div><br>

<h4>Методы</h4>
<div class=blockindent><br>
<pre id="getFrequencyData"><span onclick="showClick(type_uint8array)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('get frequency data - получить частотные данные');" onmouseout="hide()">.getFrequencyData</a></span>()</pre>
Данный метод использует метод Web Audio с названием <tt><a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/getByteFrequencyData" target="_blank">getByteFrequencyData</a></tt>.<br>
Вот перевод части описания метода по ссылке выше: метод <tt>getByteFrequencyData</tt> интерфейса <tt>AnalyserNode</tt> копирует данные текущей частоты в массив беззнаковых целых чисел (Uint8Array), переданный с ним.<br>
Если в массиве элементов меньше, чем в <tt>AnalyserNode.frequencyBinCount</tt>, избыточные элементы отбрасываются. Если же элементов больше, чем требуется, избыточные элементы игнорируются.<br><br>
<pre id="getAverageFrequency"><span onclick="showClick(type_number)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('get average frequency - получить среднюю частоту');" onmouseout="hide()">.getAverageFrequency</a></span>()</pre>
Метод получает среднее значение частот, возвращаемых методом <tt><a href="#getFrequencyData"  onmouseover="show('AudioAnalyser.getFrequencyData');" onmouseout="hide()">getFrequencyData</a></tt>.</div><br>

<h4>Исходники</h4>
<div class=blockindent><a href="https://github.com/mrdoob/three.js/blob/master/src/audio/AudioAnalyser.js" target="_blank">AudioAnalyser.js на github.com</a></div><br>

<br><br>
</body></html>