<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>Three.js</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../1.css">
<script type="text/javascript" src="../1.js"></script>
</head>
<body>

<span class="right_side"><a href="mesh.htm" title="Переход к родительскому классу"><tt>Mesh &rarr;</tt></a></span>
<h3>InstancedMesh</h3>
Специальная версия сетки (Mesh) с поддержкой визуализации экземпляров. Используйте InstancedMesh ("экземплярная" сетка) если нужно показать большое число объектов с одинаковой геометрией и материалом, но с различными "мировыми" изменениями.
Использование InstancedMesh поможет уменьшить число вызовов перерисовки и тем самым улучшит общую производительность визуализации в приложении.<br><br>

<h4>Пример</h4>
<pre><a href="https://threejs.org/examples/#webgl_instancing_dynamic" target="_blank">WebGL / instancing / dynamic</a>
<a href="https://threejs.org/examples/#webgl_instancing_modified" target="_blank">WebGL / instancing / modified</a>
<a href="https://threejs.org/examples/#webgl_instancing_performance" target="_blank">WebGL / instancing / performance</a>
<a href="https://threejs.org/examples/#webgl_instancing_scatter" target="_blank">WebGL / instancing / scatter</a>
<a href="https://threejs.org/examples/#webgl_instancing_raycast" target="_blank">WebGL / instancing / raycast</a></pre><br>

<h4>Конструктор</h4>
<pre>InstancedMesh( <a href="../core/bufferGeometry.htm" onmouseover="show('BufferGeometry.<br>geometry - геометрия, в данном случае<br>означает геометрический элемент')" onmouseout="hide()">geometry</a>, <a href="../materials/material.htm" onmouseover="show('Material.<br>material - материал')" onmouseout="hide()">material</a>, <span onclick="showClick(type_int)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('count - счет, итог, подсчитанное число')" onmouseout="hide()">count</a></span>)</pre>

<div class=list><tt>geometry</tt> - экземпляр BufferGeometry.</div>
<div class=list><tt>material</tt> - экземпляр Material. Значением по умолчанию является новый <a href="../materials/meshBasicMaterial.htm" onmouseover="show('MeshBasicMaterial')" onmouseout="hide()">MeshBasicMaterial</a>.</div>
<div class=list><tt>count</tt> - число экземпляров.</div><br>

<h4>Свойства</h4>
Общие свойства смотрите в описании базового класса <a href="mesh.htm" onmouseover="show('Mesh')" onmouseout="hide()">Mesh</a>.
<div class=blockindent><br>

<pre id="count"><span onclick="showClick(type_int)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('count - счет, итог, подсчитанное число')" onmouseout="hide()">.count</a></span></pre>
Число экземпляров. Значение <tt>count</tt>, переданное в конструктор, представляет максимальное число экземпляров данной сетки.
Число экземпляров можно изменять во время выполнения приложения на целочисленное значение в диапазоне <tt>[0, count]</tt>.<br>
Если требуется больше экземпляров, чем исходное значение <tt>count</tt>, нужно создать новый InstancedMesh.<br><br>

<pre id="instanceMatrix"><a href="../core/bufferAttribute.htm" onmouseover="show('BufferAttribute.<br>instance matrix - матрица экземпляра')" onmouseout="hide()">.instanceMatrix</a></pre>
Представляет локальные изменения всех экземпляров. Если требуется изменить данные экземпляра с помощью <tt><a href="#setMatrixAt" onmouseover="show('InstancedMesh.setMatrixAt')" onmouseout="hide()">setMatrixAt()</a></tt>,
то вначале нужно установить его флаг <tt><a href="../core/bufferAttribute.htm#needsUpdate" onmouseover="show('BufferAttribute.needsUpdate')" onmouseout="hide()">needsUpdate</a></tt> как <tt>true</tt>.</div><br>

<h4>Методы</h4>
Общие методы смотрите в описании базового класса <a href="mesh.htm" onmouseover="show('Mesh')" onmouseout="hide()">Mesh</a>.
<div class=blockindent><br>
<pre id="getMatrixAt"><span onclick="showClick(type_null)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('set matrix at - установить матрицу в...')" onmouseout="hide()">.getMatrixAt</a></span>( <span onclick="showClick(type_int)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('index - индекс, указатель')" onmouseout="hide()">index</a></span>, <a href="../math/matrix4.htm" onmouseover="show('Matrix4<br>matrix - матрица')" onmouseout="hide()">matrix</a> )</pre>
<div class=list><tt>index</tt> - индекс экземпляра. Значение должно быть в диапазоне <tt>[0, count]</tt>, т.е. от <tt>0</tt> до значения, определенного свойством <tt>count</tt>.</div>
<div class=list><tt>matrix</tt> - матрица <tt>4&#215;4</tt>, представляющая локальные преобразования экземпляра с указанным <tt>index</tt>.</div>
Получает локальную матрицу преобразования указанного экземпляра.<br><br>

<pre id="setMatrixAt"><span onclick="showClick(type_null)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('set matrix at - установить матрицу в...')" onmouseout="hide()">.setMatrixAt</a></span>( <span onclick="showClick(type_int)"><a href="#" onclick="return false" onblur="hideClick()" onmouseover="show('index - индекс, указатель')" onmouseout="hide()">index</a></span>, <a href="../math/matrix4.htm" onmouseover="show('Matrix4<br>matrix - матрица')" onmouseout="hide()">matrix</a> )</pre>
<div class=list><tt>index</tt> - индекс экземпляра. Значение должно быть в диапазоне <tt>[0, count]</tt>, т.е. от <tt>0</tt> до значения, определенного свойством <tt>count</tt>.</div>
<div class=list><tt>matrix</tt> - матрица <tt>4&#215;4</tt>, представляющая локальные преобразования отдельного экземпляра.<br>
Устанавливает заданную локальную матрицу преобразования для экземпляра с указанным <tt>index</tt>.</div></div><br>

<h4>Исходники</h4>
<div class=blockindent><a href="https://github.com/mrdoob/three.js/blob/master/src/objects/InstancedMesh.js" target="_blank">InstancedMesh.js на github.com</a></div><br><br>

<br><br>
</body></html>
